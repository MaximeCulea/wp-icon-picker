!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=wp.media.controller.State.extend({defaults:{multiple:!1,menu:"default",toolbar:"select",baseType:"font"},initialize:function(){var a=this.get("data");this.set("groups",new Backbone.Collection(a.groups)),this.set("library",new wp.media.model.IconPickerFonts(a.items)),this.set("selection",new wp.media.model.Selection(null,{multiple:this.get("multiple")}))},activate:function(){this.frame.on("open",this.refresh,this),this.refresh()},deactivate:function(){this.frame.off("open",this.refresh,this)},refresh:function(){this.resetFilter(),this.updateSelection()},resetFilter:function(){var a=this.get("library"),b=this.get("groups"),c=this.frame.target,d=c.get("group"),e=b.findWhere({id:d});e||(d=c.defaults.group),a.props.set("group",d)},updateSelection:function(){var a,b=this.get("selection"),c=this.get("library"),d=this.frame.target,e=d.get("icon"),f=d.get("type");this.id===f&&(a=c.findWhere({id:e})),b.reset(a?a:null)},getContentView:function(){return new wp.media.view.IconPickerFontBrowser({controller:this.frame,model:this,groups:this.get("groups"),collection:this.get("library"),selection:this.get("selection"),baseType:this.get("baseType"),type:this.get("id")})}});b.exports=d},{}],2:[function(a,b,c){var d,e=wp.media.controller.Library,f=wp.media.view.l10n,g=wp.media.model,h=wp.media.view;d=e.extend({defaults:_.defaults({id:"image",syncSelection:!1},e.prototype.defaults),initialize:function(a){var b=this.get("selection");this.options=a,this.set("library",wp.media.query({type:a.data.mimeTypes})),this.routers={upload:{text:f.uploadFilesTitle,priority:20},browse:{text:f.mediaLibraryTitle,priority:40}},b instanceof g.Selection||this.set("selection",new g.Selection(b,{multiple:!1})),e.prototype.initialize.apply(this,arguments)},activate:function(){e.prototype.activate.apply(this,arguments),this.get("library").observe(wp.Uploader.queue),this.frame.on("open",this.updateSelection,this),this.updateSelection()},deactivate:function(){e.prototype.deactivate.apply(this,arguments),this.get("library").unobserve(wp.Uploader.queue),this.frame.off("open",this.updateSelection,this)},getContentView:function(a){var b="upload"===a?this.uploadContent():this.browseContent();return this.frame.$el.removeClass("hide-toolbar"),b},browseContent:function(){return new h.AttachmentsBrowser({controller:this.frame,collection:this.get("library"),selection:this.get("selection"),model:this,sortable:this.get("sortable"),search:this.get("searchable"),filters:this.get("filterable"),sidebar:!1,display:!1,dragInfo:this.get("dragInfo"),idealColumnWidth:this.get("idealColumnWidth"),suggestedWidth:this.get("suggestedWidth"),suggestedHeight:this.get("suggestedHeight"),AttachmentView:"svg"===this.id?h.IconPickerSvgItem:void 0})},uploadContent:function(){return new wp.media.view.UploaderInline({controller:this.frame})},updateSelection:function(){var a,b=this.get("selection"),c=this.frame.target,d=c.get("icon"),e=c.get("type");this.id===e&&(a=g.Attachment.get(d),this.dfd=a.fetch()),b.reset(a?a:null)}}),b.exports=d},{}],3:[function(a,b,c){wp.media.model.IconPickerTarget=a("./models/target.js"),wp.media.model.IconPickerFonts=a("./models/fonts.js"),wp.media.controller.IconPickerFont=a("./controllers/font.js"),wp.media.controller.IconPickerImg=a("./controllers/img.js"),wp.media.view.IconPickerFontItem=a("./views/font-item.js"),wp.media.view.IconPickerFontLibrary=a("./views/font-library.js"),wp.media.view.IconPickerFontFilter=a("./views/font-filter.js"),wp.media.view.IconPickerFontBrowser=a("./views/font-browser.js"),wp.media.view.IconPickerSvgItem=a("./views/svg-item.js"),wp.media.view.MediaFrame.IconPicker=a("./views/frame.js")},{"./controllers/font.js":1,"./controllers/img.js":2,"./models/fonts.js":4,"./models/target.js":5,"./views/font-browser.js":6,"./views/font-filter.js":7,"./views/font-item.js":8,"./views/font-library.js":9,"./views/frame.js":10,"./views/svg-item.js":11}],4:[function(a,b,c){var d=Backbone.Collection.extend({initialize:function(a){this.items=new Backbone.Collection(a),this.props=new Backbone.Model({group:"all",search:""}),this.props.on("change",this.refresh,this)},refresh:function(a){var b=this,c=this.items.toJSON();_.each(a.toJSON(),function(a,d){b.filters[d]&&(c=_.filter(c,_.bind(b.filters[d],this),a))},this),this.reset(c)},filters:{group:function(a){var b=this.props.get("group");return"all"===b||a.group===b||""===a.group},search:function(a){var b,c=this.props.get("search");return b=""===c?!0:_.any(["id","name"],function(b){var c=a[b];return c&&-1!==c.search(this)},c)}}});b.exports=d},{}],5:[function(a,b,c){var d=Backbone.Model.extend({defaults:{type:"",group:"all",icon:""}});b.exports=d},{}],6:[function(a,b,c){var d=wp.media.View.extend({defaults:{sidebar:!1},className:function(){var a="attachments-browser icon-picker-fonts-browser";return this.options.sidebar||(a+=" hide-sidebar"),a},initialize:function(){this.groups=this.options.groups,this.createToolbar(),this.createLibrary()},createLibrary:function(){this.items=new wp.media.view.IconPickerFontLibrary({controller:this.controller,collection:this.collection,selection:this.options.selection,baseType:this.options.baseType,type:this.options.type}),this.items.listenTo(this.controller,"attachment:keydown:arrow",this.items.arrowEvent),this.items.listenTo(this.controller,"attachment:details:shift-tab",this.items.restoreFocus),this.views.add(this.items)},createToolbar:function(){this.toolbar=new wp.media.view.Toolbar({controller:this.controller}),this.views.add(this.toolbar),this.toolbar.set("filters",new wp.media.view.IconPickerFontFilter({controller:this.controller,model:this.collection.props,priority:-80}).render()),this.toolbar.set("search",new wp.media.view.Search({controller:this.controller,model:this.collection.props,priority:60}).render())}});b.exports=d},{}],7:[function(a,b,c){var d=wp.media.view.AttachmentFilters.extend({createFilters:function(){var a=this.controller.state().get("groups"),b={};b.all={text:wp.media.view.l10n.iconPicker.allFilter,props:{group:"all"}},a.each(function(a){b[a.id]={text:a.get("name"),props:{group:a.id}}}),this.filters=b},change:function(){var a=this.filters[this.el.value];a&&this.model.set("group",a.props.group)}});b.exports=d},{}],8:[function(a,b,c){var d,e=wp.media.view.Attachment.Library;d=e.extend({className:"attachment icon-picker-item",initialize:function(){this.template=wp.media.template("icon-picker-"+this.options.baseType+"-item"),e.prototype.initialize.apply(this,arguments)},render:function(){var a=_.defaults(this.model.toJSON(),{baseType:this.options.baseType,type:this.options.type});return this.views.detach(),this.$el.html(this.template(a)),this.updateSelect(),this.views.render(),this}}),b.exports=d},{}],9:[function(a,b,c){var d,e=jQuery,f=wp.media.view.Attachments;d=f.extend({className:"attachments icon-picker-items clearfix",initialize:function(){f.prototype.initialize.apply(this,arguments),_.bindAll(this,"scrollToSelected"),_.defer(this.scrollToSelected,this),this.controller.on("open",this.scrollToSelected,this),e(this.options.scrollElement).off("scroll",this.scroll)},render:function(){return this.collection.each(function(a){this.views.add(this.createAttachmentView(a),{at:this.collection.indexOf(a)})},this),this},createAttachmentView:function(a){var b=new wp.media.view.IconPickerFontItem({controller:this.controller,model:a,collection:this.collection,selection:this.options.selection,baseType:this.options.baseType,type:this.options.type});return this._viewsByCid[b.cid]=b},scrollToSelected:function(){var a,b,c=this.options.selection.single();c&&(a=this.getView(c),a&&!this.isInView(a.$el)&&(b=a.$el.offset().top-parseInt(a.$el.css("paddingTop"),10)-this.$el.offset().top+this.$el.scrollTop()-parseInt(this.$el.css("paddingTop"),10),this.$el.scrollTop(b)))},getView:function(a){return _.findWhere(this._viewsByCid,{model:a})},isInView:function(a){var b=this.$window.scrollTop(),c=b+this.$window.height(),d=a.offset().top,e=d+a.height();return c>=e&&d>=b},prepare:function(){},ready:function(){},initSortable:function(){},scroll:function(){}}),b.exports=d},{}],10:[function(a,b,c){var d,e=wp.media.view.l10n,f=wp.media.view.MediaFrame.Select;d=f.extend({initialize:function(){_.defaults(this.options,{title:e.iconPicker.frameTitle,multiple:!1,ipTypes:iconPicker.types,target:null}),this.options.target instanceof wp.media.model.IconPickerTarget?this.target=this.options.target:this.target=new wp.media.model.IconPickerTarget,f.prototype.initialize.apply(this,arguments)},createStates:function(){var a;_.each(this.options.ipTypes,function(b){wp.media.controller.hasOwnProperty("IconPicker"+b.controller)&&(a=wp.media.controller["IconPicker"+b.controller],this.states.add(new a({id:b.id,content:b.id,title:b.name,data:b.data})))},this)},bindHandlers:function(){this.on("router:create:browse",this.createRouter,this),this.on("router:render:browse",this.browseRouter,this),this.on("content:render",this.ipRenderContent,this),this.on("toolbar:create:select",this.createSelectToolbar,this),this.on("open",this._ipSetState,this),this.on("select",this._ipUpdateTarget,this)},_ipSetState:function(){var a=this.target.get("type");a&&this.states.findWhere({id:a})||(a=this.states.at(0).id),this.setState(a)},_ipUpdateTarget:function(){var a=this.state(),b=this.state().get("selection").single();this.target.set({type:a.id,icon:b.get("id"),group:b.get("group")})},browseRouter:function(a){var b=this.state().routers;b&&a.set(b)},ipRenderContent:function(){var a=this.state(),b=this.content.mode(),c=a.getContentView(b);this.content.set(c)}}),b.exports=d},{}],11:[function(a,b,c){var d=wp.media.view.Attachment.Library.extend({template:wp.template("icon-picker-svg-item")});b.exports=d},{}]},{},[3]);